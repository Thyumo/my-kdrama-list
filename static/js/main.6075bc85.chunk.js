(this["webpackJsonpmy-kdrama-list"]=this["webpackJsonpmy-kdrama-list"]||[]).push([[0],{151:function(e,t,a){e.exports=a(171)},156:function(e,t,a){},171:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),i=a.n(c),u=(a(156),a(8)),l=a.n(u),o=a(13),s=a(21),m=a(104),d=new m.a({id:"mykdramalist-svqcx"}),p=n.createContext(void 0),f=function(e){var t=e.children,a=n.useRef(d),r=n.useState(d.currentUser),c=Object(s.a)(r,2),i=c[0],u=c[1];n.useEffect((function(){u(d.currentUser)}),[a.current.currentUser]);var f=function(){var e=Object(o.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.emailPasswordAuth.registerUser(t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),v={id:"mykdramalist-svqcx",user:i,logIn:function(){var e=Object(o.a)(l.a.mark((function e(t,a){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.b.emailPassword(t,a),e.next=3,d.logIn(n);case 3:u(d.currentUser);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),logOut:function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=d.currentUser)||void 0===t?void 0:t.logOut();case 2:u(d.currentUser);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),registerUser:f};return n.createElement(p.Provider,{value:v},t)},v=function(){var e=n.useContext(p);if(!e)throw new Error("You must call useRealmApp() inside of a <RealmApp />.");return e},h=a(12),g=a(44),b=function(e){var t=e.children,a=v(),r=a.id,c=a.user,i=n.useState(w(r,c)),u=Object(s.a)(i,2),l=u[0],o=u[1];return n.useEffect((function(){o(w(r,c))}),[r,c]),n.createElement(g.ApolloProvider,{client:l},t)};function w(e,t){var a="https://realm.mongodb.com/api/client/v2.0/app/".concat(e,"/graphql");return new g.ApolloClient({link:new g.HttpLink({uri:a,fetch:function(e){function t(t,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(o.a)(l.a.mark((function e(a,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.headers||(n.headers={}),e.next=3,t.refreshCustomData();case 3:return r=Object(h.a)(Object(h.a)({},n),{},{headers:Object(h.a)(Object(h.a)({},n.headers),{},{Authorization:"Bearer ".concat(t.accessToken)})}),e.abrupt("return",fetch(a,r));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}),cache:new g.InMemoryCache})}var E=a(130),O=a(198),x=a(172),j=a(139),y=a(217),k=a(206),C=function(){var e=v(),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],i=a[1],u=Object(n.useState)(""),m=Object(s.a)(u,2),d=m[0],p=m[1],f=r.a.useState({}),g=Object(s.a)(f,2),b=g[0],w=g[1];function C(e){console.error(e);var t=function(e){var t,a=e.message.split(":"),n=a[a.length-1].trimStart();if(!n)return{status:"",message:""};var r=Object(E.a)(/(.+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]\(status ([0-9][0-9][0-9])/,{message:1,status:2}),c=n.match(r),i=null!==(t=null===c||void 0===c?void 0:c.groups)&&void 0!==t?t:{};return{status:i.status,message:i.message}}(e),a=t.status;switch(t.message||a){case"invalid username":w((function(e){return Object(h.a)(Object(h.a)({},e),{},{email:"Invalid email address."})}));break;case"invalid username/password":case"invalid password":case"401":w((function(e){return Object(h.a)(Object(h.a)({},e),{},{password:"Incorrect password."})}));break;case"name already in use":case"409":w((function(e){return Object(h.a)(Object(h.a)({},e),{},{email:"Email is already registered."})}));break;case"password must be between 6 and 128 characters":case"400":w((function(e){return Object(h.a)(Object(h.a)({},e),{},{password:"Password must be between 6 and 128 characters."})}))}}var D=function(){var t=Object(o.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w((function(e){return Object(h.a)(Object(h.a)({},e),{},{password:void 0})})),t.prev=1,t.next=4,e.logIn(c,d);case 4:return t.abrupt("return",t.sent);case 7:t.prev=7,t.t0=t.catch(1),C(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(O.a,null,r.a.createElement(x.a,{elevation:4,style:{paddingTop:"100px",paddingBottom:"100px",marginTop:"200px",display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(j.a,{variant:"h2"},"Login Screen"),r.a.createElement("form",null,r.a.createElement(y.a,{style:{margin:"8px"},fullWidth:!0,id:"email",label:"Email",type:"email",value:c,error:!!b.email,helperText:b.email,onChange:function(e){return i(e.target.value)}}),r.a.createElement(y.a,{style:{margin:"8px"},fullWidth:!0,id:"password",label:"Password",type:"password",value:d,error:!!b.password,helperText:b.password,onChange:function(e){return p(e.target.value)}}),r.a.createElement(k.a,{style:{margin:"8px"},fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){return D()}},"Log In"))))},D=a(56),S=a(212),I=a(213),A=a(207),K=a(214),T=a(106),L=a(43),U=a.n(L);function F(){var e=Object(T.a)(["\n    mutation AddKDrama($kDrama: KDramaInsertInput!) {\n  kDrama: insertOneKDrama(data: $kDrama) {\n    _id\n    title\n    image\n    status\n  }\n}\n    "]);return F=function(){return e},e}function P(){var e=Object(T.a)(["\n    query GetAllKDramas {\n  kDramas {\n    _id\n    title\n    image\n    status\n  }\n}\n    "]);return P=function(){return e},e}var W=U()(P());var q=U()(F());var B="watching",z="completed",M="planned",R=a(7),$=a(219),_=a(222),J=a(223),G=a(135),H=a.n(G),N=Object(R.a)((function(){return{tooltip:{fontSize:20}}}))($.a),Q=Object(_.a)(J.a)({height:150,width:150}),Y=Object(_.a)(A.a)({marginTop:30,marginBottom:20,width:800}),V=function(e){var t=e.list;return r.a.createElement(Y,{container:!0,direction:"row",justify:"space-evenly"},t.map((function(e){return r.a.createElement(N,{key:e._id,title:e.title},e.image?r.a.createElement(Q,{src:e.image}):r.a.createElement(Q,null,r.a.createElement(H.a,{style:{fontSize:"150px"}})))})))},X=a(208),Z=a(137),ee=a.n(Z),te=a(136),ae=a.n(te),ne=function(e){var t=e.logOut,a=e.handleOpen;return r.a.createElement(r.a.Fragment,null,r.a.createElement(X.a,{style:{position:"fixed",right:"80px",bottom:"160px"},color:"secondary"},r.a.createElement(ae.a,{onClick:a})),r.a.createElement(X.a,{style:{position:"fixed",right:"80px",bottom:"80px"},color:"primary",onClick:function(){return t()}},r.a.createElement(ee.a,null)))},re=a(220),ce=a(209),ie=a(210),ue=a(211),le=a(216),oe=a(224),se=function(e){var t=e.isOpen,a=e.handleClose,c=e.addKDrama,i=Object(n.useState)(M),u=Object(s.a)(i,2),l=u[0],o=u[1],m=Object(n.useState)(""),d=Object(s.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(""),h=Object(s.a)(v,2),g=h[0],b=h[1],w={title:p,image:g,status:l};return r.a.createElement(re.a,{fullWidth:!0,open:t,onClose:a},r.a.createElement(ce.a,null,"Add KDrama"),r.a.createElement(ie.a,{style:{display:"flex",flexDirection:"column"}},r.a.createElement(ue.a,null,"Enter the new KDrama's information"),r.a.createElement(y.a,{value:p,onChange:function(e){return f(e.target.value)},required:!0,autoFocus:!0,margin:"dense",label:"Title"}),r.a.createElement(y.a,{value:g,onChange:function(e){return b(e.target.value)},margin:"dense",label:"Image Link"}),r.a.createElement(le.a,{onChange:function(e){return o(e.target.value)},value:l,required:!0,style:{margin:"21px 0px 4px 0px"}},r.a.createElement(oe.a,{value:B},"Watching"),r.a.createElement(oe.a,{value:z},"Completed"),r.a.createElement(oe.a,{value:M},"Planned")),r.a.createElement(k.a,{type:"submit",color:"primary",style:{display:"flex",alignSelf:"flex-end",width:"30%",marginTop:20},variant:"outlined",onClick:function(){c(w),a()}},"Add")))},me=function(){var e,t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],i=a[1],u=Object(n.useState)(!1),m=Object(s.a)(u,2),d=m[0],p=m[1],f=v().logOut,h=g.useMutation(q,e),b=Object(s.a)(h,1)[0],w=function(e){return g.useQuery(W,e)}({onCompleted:function(e){(null===e||void 0===e?void 0:e.kDramas)&&i(e.kDramas)}}).loading,E=function(){var e=Object(o.a)(l.a.mark((function e(t){var a,n,r,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(D.a)(c),e.prev=1,e.next=4,b({variables:{kDrama:t}});case 4:r=e.sent,u=null===(n=r.data)||void 0===n?void 0:n.kDrama,i([].concat(Object(D.a)(a),[u])),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(1),i(a),new Error("Couldn't add new KDrama");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(A.a,{container:!0,direction:"column",alignItems:"center",justify:"space-between"},r.a.createElement(K.a,{style:{width:"800px",marginTop:"50px"}},function(){var e;if(w)return r.a.createElement(S.a,null);var t=c.find((function(e){return e.status===B}));return r.a.createElement(I.a,{style:{padding:"0px"}},(null===t||void 0===t?void 0:t.image)&&r.a.createElement("img",{width:"800px",src:t.image,alt:"kdrama"}),r.a.createElement(j.a,{style:{paddingLeft:"5px"},variant:"h4"},"Currently watching:"),r.a.createElement(j.a,{style:{paddingLeft:"5px"},variant:"h3"},null!==(e=null===t||void 0===t?void 0:t.title)&&void 0!==e?e:"No currently watched KDrama"))}()),r.a.createElement(V,{list:c.filter((function(e){return e.status!==B})).slice(0,4),isLoading:w}),r.a.createElement(ne,{handleOpen:function(){return p(!0)},logOut:f}),r.a.createElement(se,{addKDrama:E,handleClose:function(){return p(!1)},isOpen:d}))},de=function(e){return r.a.createElement(f,null,r.a.createElement(pe,null))};function pe(){var e=v();return e?e.user?r.a.createElement(b,null,r.a.createElement(me,null)):r.a.createElement(C,null):r.a.createElement("div",null,"Loading")}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[151,1,2]]]);
//# sourceMappingURL=main.6075bc85.chunk.js.map