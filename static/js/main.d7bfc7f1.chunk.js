(this["webpackJsonpmy-kdrama-list"]=this["webpackJsonpmy-kdrama-list"]||[]).push([[0],{152:function(e,t,n){e.exports=n(171)},157:function(e,t,n){},171:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(19),c=n.n(i),o=(n(157),n(8)),u=n.n(o),l=n(12),s=n(15),d=n(105),m=new d.a({id:"mykdramalist-svqcx"}),p=a.createContext(void 0),f=function(e){var t=e.children,n=a.useRef(m),r=a.useState(m.currentUser),i=Object(s.a)(r,2),c=i[0],o=i[1];a.useEffect((function(){o(m.currentUser)}),[n.current.currentUser]);var f=function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.emailPasswordAuth.registerUser(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v={id:"mykdramalist-svqcx",user:c,logIn:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.b.emailPassword(t,n),e.next=3,m.logIn(a);case 3:o(m.currentUser);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),logOut:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=m.currentUser)||void 0===t?void 0:t.logOut();case 2:o(m.currentUser);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),registerUser:f};return a.createElement(p.Provider,{value:v},t)},v=function(){var e=a.useContext(p);if(!e)throw new Error("You must call useRealmApp() inside of a <RealmApp />.");return e},b=n(13),g=n(38),h=function(e){var t=e.children,n=v(),r=n.id,i=n.user,c=a.useState(E(r,i)),o=Object(s.a)(c,2),u=o[0],l=o[1];return a.useEffect((function(){l(E(r,i))}),[r,i]),a.createElement(g.ApolloProvider,{client:u},t)};function E(e,t){var n="https://realm.mongodb.com/api/client/v2.0/app/".concat(e,"/graphql");return new g.ApolloClient({link:new g.HttpLink({uri:n,fetch:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(l.a)(u.a.mark((function e(n,a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.headers||(a.headers={}),e.next=3,t.refreshCustomData();case 3:return r=Object(b.a)(Object(b.a)({},a),{},{headers:Object(b.a)(Object(b.a)({},a.headers),{},{Authorization:"Bearer ".concat(t.accessToken)})}),e.abrupt("return",fetch(n,r));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),cache:new g.InMemoryCache})}var O=n(130),j=n(201),y=n(173),w=n(140),x=n(221),k=n(174),C=function(){var e=v(),t=Object(a.useState)(""),n=Object(s.a)(t,2),i=n[0],c=n[1],o=Object(a.useState)(""),d=Object(s.a)(o,2),m=d[0],p=d[1],f=r.a.useState({}),g=Object(s.a)(f,2),h=g[0],E=g[1];function C(e){console.error(e);var t=function(e){var t,n=e.message.split(":"),a=n[n.length-1].trimStart();if(!a)return{status:"",message:""};var r=Object(O.a)(/(.+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]\(status ([0-9][0-9][0-9])/,{message:1,status:2}),i=a.match(r),c=null!==(t=null===i||void 0===i?void 0:i.groups)&&void 0!==t?t:{};return{status:c.status,message:c.message}}(e),n=t.status;switch(t.message||n){case"invalid username":E((function(e){return Object(b.a)(Object(b.a)({},e),{},{email:"Invalid email address."})}));break;case"invalid username/password":case"invalid password":case"401":E((function(e){return Object(b.a)(Object(b.a)({},e),{},{password:"Incorrect password."})}));break;case"name already in use":case"409":E((function(e){return Object(b.a)(Object(b.a)({},e),{},{email:"Email is already registered."})}));break;case"password must be between 6 and 128 characters":case"400":E((function(e){return Object(b.a)(Object(b.a)({},e),{},{password:"Password must be between 6 and 128 characters."})}))}}var D=function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E((function(e){return Object(b.a)(Object(b.a)({},e),{},{password:void 0})})),t.prev=1,t.next=4,e.logIn(i,m);case 4:return t.abrupt("return",t.sent);case 7:t.prev=7,t.t0=t.catch(1),C(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(j.a,null,r.a.createElement(y.a,{elevation:4,style:{paddingTop:"70px",paddingBottom:"70px",marginTop:"200px",display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(w.a,{variant:"h2"},"My KDrama List"),r.a.createElement("form",null,r.a.createElement(x.a,{style:{margin:"8px",marginTop:"38px"},fullWidth:!0,id:"email",label:"Email",type:"email",value:i,error:!!h.email,helperText:h.email,onChange:function(e){return c(e.target.value)}}),r.a.createElement(x.a,{style:{margin:"8px"},fullWidth:!0,id:"password",label:"Password",type:"password",value:m,error:!!h.password,helperText:h.password,onChange:function(e){return p(e.target.value)}}),r.a.createElement(k.a,{style:{margin:"8px",marginTop:"38px"},fullWidth:!0,variant:"outlined",color:"primary",onClick:function(){return D()}},"Log In"))))},D=n(45),S=n(218),I=n(209),K=n(68),_=n(36),A=n.n(_);function $(){var e=Object(K.a)(["\n    mutation SetEpisodes($id: ObjectId!, $counter: Float!) {\n  kDrama: updateOneKDrama(query: {_id: $id}, set: {currentEpisode: $counter}) {\n    _id\n    title\n    image\n    status\n    totalEpisodes\n    currentEpisode\n  }\n}\n    "]);return $=function(){return e},e}function T(){var e=Object(K.a)(['\n    mutation StartKDrama($id: ObjectId!) {\n  kDrama: updateOneKDrama(query: {_id: $id}, set: {status: "watching", currentEpisode: 1}) {\n    _id\n    title\n    image\n    status\n    totalEpisodes\n    currentEpisode\n  }\n}\n    ']);return T=function(){return e},e}function F(){var e=Object(K.a)(["\n    mutation SetKDramaStatus($id: ObjectId!, $status: String!) {\n  kDrama: updateOneKDrama(query: {_id: $id}, set: {status: $status}) {\n    _id\n    title\n    image\n    status\n    totalEpisodes\n    currentEpisode\n  }\n}\n    "]);return F=function(){return e},e}function W(){var e=Object(K.a)(["\n    mutation AddKDrama($kDrama: KDramaInsertInput!) {\n  kDrama: insertOneKDrama(data: $kDrama) {\n    _id\n    title\n    image\n    status\n    totalEpisodes\n    currentEpisode\n  }\n}\n    "]);return W=function(){return e},e}function q(){var e=Object(K.a)(["\n    query GetAllKDramas {\n  kDramas {\n    _id\n    title\n    image\n    status\n    totalEpisodes\n    currentEpisode\n  }\n}\n    "]);return q=function(){return e},e}var L=A()(q());var P=A()(W());var U=A()(F());A()(T());var M=A()($());var B="watching",z="completed",R="planned",N={watching:"Complete",completed:"Completed",planned:"Start Watching"},J=n(6),Q=n(223),G=n(226),H=n(227),Y=n(135),V=n.n(Y),X=Object(J.a)((function(){return{tooltip:{fontSize:20}}}))(Q.a),Z=Object(G.a)(H.a)({height:150,width:150}),ee=Object(G.a)(I.a)({marginTop:30,marginBottom:20,width:800}),te=function(e){var t=e.list,n=e.setDisplayedKDrama;return r.a.createElement(ee,{container:!0,direction:"row",justify:"space-evenly"},t.map((function(e){return r.a.createElement(X,{key:e._id,title:e.title},e.image?r.a.createElement(Z,{onClick:function(){return function(e){n(e)}(e)},src:e.image}):r.a.createElement(Z,null,r.a.createElement(V.a,{style:{fontSize:"150px"}})))})))},ne=n(210),ae=n(211),re=n(212),ie=function(e){var t,n,a=e.kDrama,i=e.setEpisodes,c=e.setStatus,o=a.status===B;return r.a.createElement(ne.a,{style:{width:"800px",marginTop:"50px"},elevation:5},r.a.createElement(ae.a,{style:{padding:"0px"}},(null===a||void 0===a?void 0:a.image)&&r.a.createElement("img",{style:{objectFit:"cover"},width:"800px",height:"450px",src:a.image,alt:"kdrama"}),r.a.createElement(w.a,{style:{paddingLeft:"5px"},variant:"h4"},o?"Currently watching:":"Next planned:"),r.a.createElement(w.a,{style:{paddingLeft:"5px",fontWeight:"bold"},variant:"h3"},null!==(t=a.title)&&void 0!==t?t:"No currently watched KDrama"),r.a.createElement(re.a,{style:{justifyContent:"space-between"}},r.a.createElement(k.a,{variant:"outlined",color:"primary",onClick:function(){return o?(c(a._id,z),void i(a._id,a.totalEpisodes)):(c(a._id,B),void i(a._id,1))}},N[a.status]),r.a.createElement(k.a,{onClick:function(){return i(a._id,(a.currentEpisode||0)+1)},variant:"outlined",color:"primary"},"".concat(null!==(n=a.currentEpisode)&&void 0!==n?n:"0","/").concat(a.totalEpisodes)))))},ce=n(213),oe=n(214),ue=n(138),le=n.n(ue),se=n(137),de=n.n(se),me=n(136),pe=n.n(me),fe=function(e){var t=e.logOut,n=e.handleOpen,i=e.setFilter,c=Object(a.useState)(!1),o=Object(s.a)(c,2),u=o[0],l=o[1],d=function(e){i(e),l(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{style:{position:"fixed",right:"80px",bottom:"240px",backgroundColor:"green",color:"white"},onClick:function(){l(!u)}},r.a.createElement(pe.a,null)),u&&r.a.createElement(oe.a,{variant:"outlined",orientation:"vertical",style:{position:"fixed",right:"160px",bottom:"200px"}},r.a.createElement(k.a,{style:{color:"green",borderColor:"green"},onClick:function(){return d(R)}},"Planned"),r.a.createElement(k.a,{style:{color:"green",borderColor:"green"},onClick:function(){return d(B)}},"Watching"),r.a.createElement(k.a,{style:{color:"green",borderColor:"green"},onClick:function(){return d(z)}},"Completed"),r.a.createElement(k.a,{style:{color:"green",borderColor:"green"},onClick:function(){return d(null)}},"All")),r.a.createElement(ce.a,{style:{position:"fixed",right:"80px",bottom:"160px"},color:"secondary",onClick:n},r.a.createElement(de.a,null)),r.a.createElement(ce.a,{style:{position:"fixed",right:"80px",bottom:"80px"},color:"primary",onClick:function(){return t()}},r.a.createElement(le.a,null)))},ve=n(224),be=n(215),ge=n(216),he=n(217),Ee=n(220),Oe=n(228),je=function(e){var t=e.isOpen,n=e.handleClose,i=e.addKDrama,c=Object(a.useState)(R),o=Object(s.a)(c,2),u=o[0],l=o[1],d=Object(a.useState)(""),m=Object(s.a)(d,2),p=m[0],f=m[1],v=Object(a.useState)(""),b=Object(s.a)(v,2),g=b[0],h=b[1],E=Object(a.useState)(0),O=Object(s.a)(E,2),j=O[0],y=O[1],w={title:p,image:g,status:u,totalEpisodes:j};return r.a.createElement(ve.a,{fullWidth:!0,open:t,onClose:n},r.a.createElement(be.a,null,"Add KDrama"),r.a.createElement(ge.a,{style:{display:"flex",flexDirection:"column"}},r.a.createElement(he.a,null,"Enter the new KDrama's information"),r.a.createElement(x.a,{value:p,onChange:function(e){return f(e.target.value)},required:!0,autoFocus:!0,margin:"dense",label:"Title"}),r.a.createElement(x.a,{value:g,onChange:function(e){return h(e.target.value)},margin:"dense",label:"Image Link"}),r.a.createElement(Ee.a,{onChange:function(e){return l(e.target.value)},value:u,required:!0,style:{margin:"21px 0px 4px 0px"}},r.a.createElement(Oe.a,{value:B},"Watching"),r.a.createElement(Oe.a,{value:z},"Completed"),r.a.createElement(Oe.a,{value:R},"Planned")),r.a.createElement(x.a,{value:j,onChange:function(e){return y(parseInt(e.target.value))},type:"number",margin:"dense",label:"Total Episodes"}),r.a.createElement(k.a,{type:"submit",color:"primary",style:{display:"flex",alignSelf:"flex-end",width:"30%",marginTop:20},variant:"outlined",onClick:function(){i(w),n()}},"Add")))},ye=function(){var e,t=Object(a.useState)([]),n=Object(s.a)(t,2),i=n[0],c=n[1],o=i.find((function(e){var t=e.status;return t===B||t===R})),d=Object(a.useState)(),m=Object(s.a)(d,2),p=m[0],f=m[1],b=Object(a.useState)(!1),h=Object(s.a)(b,2),E=h[0],O=h[1],j=Object(a.useState)(null),y=Object(s.a)(j,2),x=y[0],k=y[1],C=Object(a.useMemo)((function(){return i.filter((function(e){var t=e.status;return!x||t===x}))}),[x,i]),K=v().logOut,_=g.useMutation(P,e),A=Object(s.a)(_,1)[0],$=function(e){return g.useMutation(U,e)}(),T=Object(s.a)($,1)[0],F=function(e){return g.useMutation(M,e)}(),W=Object(s.a)(F,1)[0],q=function(e){return g.useQuery(L,e)}({onCompleted:function(e){(null===e||void 0===e?void 0:e.kDramas)&&c(e.kDramas)}}).loading,z=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(D.a)(i),e.prev=1,e.next=4,A({variables:{kDrama:t}});case 4:r=e.sent,o=null===(a=r.data)||void 0===a?void 0:a.kDrama,c([].concat(Object(D.a)(n),[o])),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(1),c(n),new Error("Couldn't add new KDrama");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),N=Object(a.useCallback)(function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a,r,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(D.a)(i),e.prev=1,e.next=4,W({variables:{id:t,counter:n}});case 4:o=e.sent,l=null===(r=o.data)||void 0===r?void 0:r.kDrama,a[a.findIndex((function(e){return e._id===l._id}))]=l,c(a),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(1),c(a),new Error("Couldn't increase episodes");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),[i,W]),J=Object(a.useCallback)(function(){var e=Object(l.a)(u.a.mark((function e(t,n){var a,r,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(D.a)(i),e.prev=1,e.next=4,T({variables:{id:t,status:n}});case 4:o=e.sent,l=null===(r=o.data)||void 0===r?void 0:r.kDrama,a[a.findIndex((function(e){return e._id===l._id}))]=l,c(a),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(1),c(a),new Error("Couldn't set status");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),[i,T]),Q=Object(a.useCallback)((function(){return q?r.a.createElement(S.a,{size:200}):o||p?r.a.createElement(ie,{kDrama:p||o,setStatus:J,setEpisodes:N}):r.a.createElement(w.a,{variant:"h2"},"No KDrama in Queue")}),[q,o,p,J,N]);return r.a.createElement(I.a,{style:{background:"linear-gradient(130deg, rgba(174,229,238,1) 0%, rgba(75,160,255,1) 100%)",height:"100vh",borderRadius:"0% 0% 80% 0%"},container:!0,direction:"column",alignItems:"center",justify:"space-evenly"},Q(),r.a.createElement(te,{setDisplayedKDrama:f,list:C.slice(0,4),isLoading:q}),r.a.createElement(fe,{setFilter:k,handleOpen:function(){return O(!0)},logOut:K}),r.a.createElement(je,{addKDrama:z,handleClose:function(){return O(!1)},isOpen:E}))},we=function(e){return r.a.createElement(f,null,r.a.createElement(xe,null))};function xe(){var e=v();return e?e.user?r.a.createElement(h,null,r.a.createElement(ye,null)):r.a.createElement(C,null):r.a.createElement("div",null,"Loading")}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(we,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[152,1,2]]]);
//# sourceMappingURL=main.d7bfc7f1.chunk.js.map