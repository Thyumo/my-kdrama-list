(this["webpackJsonpmy-kdrama-list"]=this["webpackJsonpmy-kdrama-list"]||[]).push([[0],{170:function(e,t,n){e.exports=n(189)},175:function(e,t,n){},189:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(19),c=n.n(i),o=(n(175),n(242)),u=n(8),l=n.n(u),s=n(13),d=n(11),m=n(111),p=new m.a({id:"mykdramalist-svqcx"}),f=a.createContext(void 0),v=function(e){var t=e.children,n=a.useRef(p),r=a.useState(p.currentUser),i=Object(d.a)(r,2),c=i[0],o=i[1];a.useEffect((function(){o(p.currentUser)}),[n.current.currentUser]);var u=function(){var e=Object(s.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.emailPasswordAuth.registerUser(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v={id:"mykdramalist-svqcx",user:c,logIn:function(){var e=Object(s.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.b.emailPassword(t,n),e.next=3,p.logIn(a);case 3:o(p.currentUser);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),logOut:function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=p.currentUser)||void 0===t?void 0:t.logOut();case 2:o(p.currentUser);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),registerUser:u};return a.createElement(f.Provider,{value:v},t)},b=function(){var e=a.useContext(f);if(!e)throw new Error("You must call useRealmApp() inside of a <RealmApp />.");return e},E=n(12),g=n(31),O=function(e){var t=e.children,n=b(),r=n.id,i=n.user,c=a.useState(h(r,i)),o=Object(d.a)(c,2),u=o[0],l=o[1];return a.useEffect((function(){l(h(r,i))}),[r,i]),a.createElement(g.ApolloProvider,{client:u},t)};function h(e,t){var n="https://realm.mongodb.com/api/client/v2.0/app/".concat(e,"/graphql");return new g.ApolloClient({link:new g.HttpLink({uri:n,fetch:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(s.a)(l.a.mark((function e(n,a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.headers||(a.headers={}),e.next=3,t.refreshCustomData();case 3:return r=Object(E.a)(Object(E.a)({},a),{},{headers:Object(E.a)(Object(E.a)({},a.headers),{},{Authorization:"Bearer ".concat(t.accessToken)})}),e.abrupt("return",fetch(n,r));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}),cache:new g.InMemoryCache})}var j=n(148),k=n(219),x=n(191),w=n(157),y=n(245),D=n(192),C=function(){var e=b(),t=Object(a.useState)(""),n=Object(d.a)(t,2),i=n[0],c=n[1],o=Object(a.useState)(""),u=Object(d.a)(o,2),m=u[0],p=u[1],f=r.a.useState({}),v=Object(d.a)(f,2),g=v[0],O=v[1];function h(e){console.error(e);var t=function(e){var t,n=e.message.split(":"),a=n[n.length-1].trimStart();if(!a)return{status:"",message:""};var r=Object(j.a)(/(.+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]\(status ([0-9][0-9][0-9])/,{message:1,status:2}),i=a.match(r),c=null!==(t=null===i||void 0===i?void 0:i.groups)&&void 0!==t?t:{};return{status:c.status,message:c.message}}(e),n=t.status;switch(t.message||n){case"invalid username":O((function(e){return Object(E.a)(Object(E.a)({},e),{},{email:"Invalid email address."})}));break;case"invalid username/password":case"invalid password":case"401":O((function(e){return Object(E.a)(Object(E.a)({},e),{},{password:"Incorrect password."})}));break;case"name already in use":case"409":O((function(e){return Object(E.a)(Object(E.a)({},e),{},{email:"Email is already registered."})}));break;case"password must be between 6 and 128 characters":case"400":O((function(e){return Object(E.a)(Object(E.a)({},e),{},{password:"Password must be between 6 and 128 characters."})}))}}var C=function(){var t=Object(s.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O((function(e){return Object(E.a)(Object(E.a)({},e),{},{password:void 0})})),t.prev=1,t.abrupt("return",e.logIn(i,m));case 5:t.prev=5,t.t0=t.catch(1),h(t.t0);case 8:case"end":return t.stop()}}),t,null,[[1,5]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(k.a,null,r.a.createElement(x.a,{elevation:4,style:{paddingTop:"70px",paddingBottom:"70px",marginTop:"200px",display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(w.a,{variant:"h2"},"My KDrama List"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),C()}},r.a.createElement(y.a,{style:{margin:"8px",marginTop:"38px"},fullWidth:!0,id:"email",label:"Email",type:"email",value:i,error:!!g.email,helperText:g.email,onChange:function(e){return c(e.target.value)}}),r.a.createElement(y.a,{style:{margin:"8px"},fullWidth:!0,id:"password",label:"Password",type:"password",value:m,error:!!g.password,helperText:g.password,onChange:function(e){return p(e.target.value)}}),r.a.createElement(D.a,{style:{margin:"8px",marginTop:"38px"},fullWidth:!0,variant:"outlined",color:"primary",type:"submit"},"Log In"))))},S=n(30),_=n(248),I=n(227),K=n(240),A=n(49),T=n(29),N=n.n(T);function P(){var e=Object(A.a)(["\n    mutation UpdateKDrama($id: ObjectId!, $kDrama: KDramaUpdateInput!) {\n  kDrama: updateOneKDrama(query: {_id: $id}, set: $kDrama) {\n    _id\n    title\n    image\n    status\n    totalEpisodes\n    currentEpisode\n    rating\n  }\n}\n    "]);return P=function(){return e},e}function $(){var e=Object(A.a)(["\n    mutation SetRating($id: ObjectId!, $rating: Float!) {\n  kDrama: updateOneKDrama(query: {_id: $id}, set: {rating: $rating}) {\n    _id\n    title\n    image\n    status\n    totalEpisodes\n    currentEpisode\n    rating\n  }\n}\n    "]);return $=function(){return e},e}function L(){var e=Object(A.a)(["\n    mutation SetEpisodes($id: ObjectId!, $counter: Float!) {\n  kDrama: updateOneKDrama(query: {_id: $id}, set: {currentEpisode: $counter}) {\n    _id\n    title\n    image\n    status\n    totalEpisodes\n    currentEpisode\n    rating\n  }\n}\n    "]);return L=function(){return e},e}function F(){var e=Object(A.a)(['\n    mutation StartKDrama($id: ObjectId!) {\n  kDrama: updateOneKDrama(query: {_id: $id}, set: {status: "watching", currentEpisode: 1}) {\n    _id\n    title\n    image\n    status\n    totalEpisodes\n    currentEpisode\n    rating\n  }\n}\n    ']);return F=function(){return e},e}function M(){var e=Object(A.a)(["\n    mutation SetKDramaStatus($id: ObjectId!, $status: String!) {\n  kDrama: updateOneKDrama(query: {_id: $id}, set: {status: $status}) {\n    _id\n    title\n    image\n    status\n    totalEpisodes\n    currentEpisode\n    rating\n  }\n}\n    "]);return M=function(){return e},e}function W(){var e=Object(A.a)(["\n    mutation DeleteKDrama($id: ObjectId!) {\n  kDrama: deleteOneKDrama(query: {_id: $id}) {\n    _id\n  }\n}\n    "]);return W=function(){return e},e}function z(){var e=Object(A.a)(["\n    mutation AddKDrama($kDrama: KDramaInsertInput!) {\n  kDrama: insertOneKDrama(data: $kDrama) {\n    _id\n    title\n    image\n    status\n    totalEpisodes\n    currentEpisode\n    rating\n  }\n}\n    "]);return z=function(){return e},e}function q(){var e=Object(A.a)(["\n    query GetAllKDramas {\n  kDramas {\n    _id\n    title\n    image\n    status\n    totalEpisodes\n    currentEpisode\n    rating\n  }\n}\n    "]);return q=function(){return e},e}var R=N()(q());var H=N()(z());var U=N()(W());var G=N()(M());N()(F());var B=N()(L());var J=N()($());var Q=N()(P());var Y=n(228),V=n(71),X=n(250),Z=n(133),ee=n.n(Z),te=n(135),ne=n.n(te),ae=n(136),re=n.n(ae),ie=n(137),ce=n.n(ie),oe=n(138),ue=n.n(oe),le=n(139),se=n.n(le),de=n(140),me=n.n(de),pe=n(141),fe=n.n(pe),ve=n(142),be=n.n(ve),Ee=Object(_.a)((function(e){e.size;var t=Object(V.a)(e,["size"]);return r.a.createElement(X.a,t)}))({height:function(e){return e.size},width:function(e){return e.size}}),ge=function(e){var t=e.image,n=e.size,a=e.onClick;return t?r.a.createElement(Ee,{size:n,onClick:a,src:t}):r.a.createElement(Ee,{size:n,onClick:a},r.a.createElement(ee.a,{style:{fontSize:n}}))},Oe=n(6),he=n(251),je=Object(Oe.a)((function(){return{tooltip:{fontSize:20}}}))(he.a),ke=Object(_.a)(I.a)({marginTop:30,marginBottom:20,width:900}),xe=Object(_.a)(I.a)({width:1020}),we={WATCHING:"watching",COMPLETED:"completed",PLANNED:"planned",HIDDEN:"hidden"},ye={watching:"Complete",completed:"Completed",planned:"Start Watching",hidden:"Hidden"},De={watching:"Currently watching",completed:"Completed",planned:"Next planned",hidden:"Hidden"},Ce=function(e){var t=e.list,n=e.currentPage,a=e.setCurrentPage,i=e.setDisplayedKDrama,c=t.slice(4*n,4*(n+1));return r.a.createElement(xe,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(Y.a,{color:"primary",onClick:function(){var e=n-1;e>=0&&a(e)}},r.a.createElement(ne.a,{fontSize:"large"})),r.a.createElement(ke,{container:!0,direction:"row",justify:"space-evenly"},c.map((function(e){return r.a.createElement(je,{key:e._id,title:e.title},r.a.createElement(ge,{size:150,image:e.image,onClick:function(){return function(e){i(e)}(e)}}))}))),r.a.createElement(Y.a,{color:"primary",onClick:function(){var e=n+1;4*e<t.length&&a(e)}},r.a.createElement(re.a,{fontSize:"large"})))},Se=n(231),_e=n(229),Ie=n(230),Ke=Object(_.a)(_e.a)({width:800,marginTop:50}),Ae=Object(_.a)("img")({height:450,width:800,objectFit:"cover"}),Te=Object(_.a)(Ie.a)({justifyContent:"space-between",padding:"8px 15px 15px 15px"}),Ne=n(253),Pe=n(108),$e=Object(Oe.a)({iconFilled:{color:Pe.a[700]}})(Ne.a),Le=function(e){var t,n,i,c=e.kDrama,o=e.setEpisodes,u=e.setStatus,l=e.setRating,s=Object(a.useState)(null!==(t=c.rating)&&void 0!==t?t:0),m=Object(d.a)(s,2),p=m[0],f=m[1];Object(a.useEffect)((function(){var e;f(null!==(e=c.rating)&&void 0!==e?e:0)}),[c,f]);var v=function(){u(c._id,we.WATCHING),o(c._id,1)},b={watching:function(){u(c._id,we.COMPLETED),o(c._id,c.totalEpisodes)},completed:function(){},planned:v};return r.a.createElement(Ke,{elevation:5},r.a.createElement(Se.a,{style:{padding:"0px"}},(null===c||void 0===c?void 0:c.image)&&r.a.createElement(Ae,{src:c.image,alt:"kdrama"}),r.a.createElement(w.a,{style:{paddingLeft:"15px"},variant:"h5"},De[c.status]),r.a.createElement(w.a,{style:{paddingLeft:"15px",fontWeight:"bold"},variant:"h4"},null!==(n=c.title)&&void 0!==n?n:"No currently watched KDrama"),r.a.createElement(Te,null,r.a.createElement($e,{value:p,onChange:function(e,t){f(t),l(c._id,t)}}),r.a.createElement("div",null,r.a.createElement(D.a,{style:{marginRight:5},variant:"outlined",color:"primary",onClick:function(){return b[c.status]()}},ye[c.status]),r.a.createElement(D.a,{onClick:function(){if(!(c.currentEpisode&&c.currentEpisode>=c.totalEpisodes))if(c.status===we.PLANNED)v();else{var e=(c.currentEpisode||0)+1;o(c._id,e),e===c.totalEpisodes&&u(c._id,we.COMPLETED)}},variant:"outlined",color:"primary"},"".concat(null!==(i=c.currentEpisode)&&void 0!==i?i:"0","/").concat(c.totalEpisodes))))))},Fe=n(233),Me=n(232),We=n(109),ze=Object(_.a)(Y.a)({position:"fixed",right:"80px",bottom:"320px",color:"white",backgroundColor:Me.a[600]}),qe=Object(_.a)(Y.a)({position:"fixed",right:"80px",bottom:"240px",backgroundColor:We.a[700],color:"white"}),Re=Object(_.a)(Fe.a)({position:"fixed",right:"160px",bottom:"200px"}),He=Object(_.a)(D.a)({color:We.a[700],borderColor:We.a[700]}),Ue=function(e){var t=e.logOut,n=e.openAddForm,i=e.openRanking,c=e.setFilter,o=e.resetPage,u=e.openEditForm,l=Object(a.useState)(!1),s=Object(d.a)(l,2),m=s[0],p=s[1],f=Object(a.useState)(!1),v=Object(d.a)(f,2),b=v[0],E=v[1],g=function(e){c(e),o(),p(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ze,{onClick:i},r.a.createElement(me.a,null)),r.a.createElement(qe,{onClick:function(){p(!m)}},r.a.createElement(se.a,null)),m&&r.a.createElement(Re,{variant:"outlined",orientation:"vertical"},r.a.createElement(He,{onClick:function(){return g(we.PLANNED)}},"Planned"),r.a.createElement(He,{onClick:function(){return g(we.WATCHING)}},"Watching"),r.a.createElement(He,{onClick:function(){return g(we.COMPLETED)}},"Completed"),r.a.createElement(He,{onClick:function(){return g(null)}},"All")),r.a.createElement(Y.a,{style:{position:"fixed",right:"80px",bottom:"160px"},color:"secondary",onClick:n},r.a.createElement(ue.a,null)),r.a.createElement(Y.a,{style:{position:"fixed",right:"80px",bottom:"80px"},color:"primary",onClick:function(){E(!b)}},r.a.createElement(fe.a,null)),b&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{style:{position:"fixed",right:"160px",bottom:"80px"},color:"primary",onClick:function(){return t()}},r.a.createElement(ce.a,null)),r.a.createElement(Y.a,{style:{position:"fixed",right:"240px",bottom:"80px"},color:"primary",onClick:function(){E(!1),u()}},r.a.createElement(be.a,null))))},Ge=n(247),Be=n(234),Je=n(235),Qe=n(236),Ye=n(244),Ve=n(252),Xe=Object(_.a)(Fe.a)({display:"flex",alignSelf:"flex-end",marginTop:20}),Ze=function(e){var t=e.isOpen,n=e.closeModal,i=e.addKDrama,c=e.editMode,o=e.editedKDrama,u=e.updateKDrama,l=e.deleteKDrama,s=Object(a.useState)(we.PLANNED),m=Object(d.a)(s,2),p=m[0],f=m[1],v=Object(a.useState)(""),b=Object(d.a)(v,2),E=b[0],g=b[1],O=Object(a.useState)(""),h=Object(d.a)(O,2),j=h[0],k=h[1],x=Object(a.useState)(0),w=Object(d.a)(x,2),C=w[0],S=w[1],_=Object(a.useState)(0),I=Object(d.a)(_,2),K=I[0],A=I[1],T=Object(a.useState)(),N=Object(d.a)(T,2),P=N[0],$=N[1];Object(a.useEffect)((function(){c&&(f((null===o||void 0===o?void 0:o.status)||""),g((null===o||void 0===o?void 0:o.title)||""),k((null===o||void 0===o?void 0:o.image)||""),S((null===o||void 0===o?void 0:o.totalEpisodes)||0),A((null===o||void 0===o?void 0:o.currentEpisode)||0))}),[c,o]);var L={title:E,image:j,status:p,totalEpisodes:C,currentEpisode:K},F=function(){f(we.PLANNED),g(""),k(""),S(0),A(0),n()};return r.a.createElement(Ge.a,{fullWidth:!0,open:t,onClose:F},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),function(){var e=!0,t={};return E&&0!==E.length||(t.title="Title must not be empty",e=!1),C<=0&&(t.episodes="Episodes must be over 0",e=!1),p===we.WATCHING&&(K<=0&&(t.currEp="Current episode must be over 0",e=!1),K>=C&&(t.currEp="Current episode must be lower than the total number of episodes",e=!1)),$(t),e}()&&(c?u(L):i(L),F())}},r.a.createElement(Be.a,null,"Add KDrama"),r.a.createElement(Je.a,{style:{display:"flex",flexDirection:"column"}},r.a.createElement(Qe.a,null,"Enter the new KDrama's information"),r.a.createElement(y.a,{value:E,onChange:function(e){return g(e.target.value)},autoFocus:!0,margin:"dense",label:"Title*",error:!!(null===P||void 0===P?void 0:P.title),helperText:null===P||void 0===P?void 0:P.title}),r.a.createElement(y.a,{value:j,onChange:function(e){return k(e.target.value)},margin:"dense",label:"Image Link"}),r.a.createElement(Ye.a,{onChange:function(e){return f(e.target.value)},value:p,required:!0,style:{margin:"21px 0px 4px 0px"}},Object.values(we).map((function(e){return r.a.createElement(Ve.a,{value:e},De[e])}))),r.a.createElement(y.a,{value:C,onChange:function(e){return S(parseInt(e.target.value))},type:"number",margin:"dense",label:"Total Episodes*",error:!!(null===P||void 0===P?void 0:P.episodes),helperText:null===P||void 0===P?void 0:P.episodes}),r.a.createElement(y.a,{value:K,onChange:function(e){return A(parseInt(e.target.value))},type:"number",margin:"dense",label:"Current Episode*",error:!!(null===P||void 0===P?void 0:P.currEp),helperText:null===P||void 0===P?void 0:P.currEp}),r.a.createElement(Xe,null,r.a.createElement(D.a,{type:"submit",color:"primary",variant:"outlined"},c?"Edit":"Add"),c&&r.a.createElement(D.a,{onClick:function(){F(),l()},color:"primary",variant:"outlined"},"Delete")))))},et=n(237),tt=n(238),nt=n(239),at=Object(_.a)(X.a)({height:70,width:70}),rt=function(e){var t=e.kDramas,n=e.isOpen,a=e.handleClose;return r.a.createElement(Ge.a,{open:n,onClose:a,fullWidth:!0},r.a.createElement(Be.a,null,r.a.createElement(w.a,{variant:"h3"},"Ranking")),r.a.createElement(et.a,null,t.filter((function(e){var t=e.rating;return t&&0!==t})).sort((function(e,t){return t.rating-e.rating})).map((function(e,t){var n=e.title,a=e.rating,i=e.image;return r.a.createElement(tt.a,{key:t},r.a.createElement(nt.a,null,r.a.createElement(w.a,{variant:"h4"},t+1)),r.a.createElement(nt.a,null,i?r.a.createElement(at,{src:i}):r.a.createElement(at,null,r.a.createElement(ee.a,{style:{fontSize:"150px"}}))),r.a.createElement(nt.a,null,r.a.createElement(w.a,{variant:"h5"},n)),r.a.createElement(nt.a,null,r.a.createElement($e,{readOnly:!0,value:a})))}))))},it=function(e,t){for(var n=Object(S.a)(t),a=0;a<t.length;a++){if(t[a]._id===e._id){n[a]=e;break}}return n},ct=Object(_.a)(I.a)({background:"linear-gradient(130deg, rgba(174,229,238,1) 0%, rgba(75,160,255,1) 100%)",height:"100vh",borderRadius:"0% 0% 80% 0%"}),ot=function(){var e,t=Object(a.useState)([]),n=Object(d.a)(t,2),i=n[0],c=n[1],o=Object(a.useState)(),u=Object(d.a)(o,2),m=u[0],p=u[1],f=Object(a.useState)(!1),v=Object(d.a)(f,2),O=v[0],h=v[1],j=Object(a.useState)(!1),k=Object(d.a)(j,2),x=k[0],y=k[1],D=Object(a.useState)(!1),C=Object(d.a)(D,2),_=C[0],I=C[1],A=Object(a.useState)(0),T=Object(d.a)(A,2),N=T[0],P=T[1],$=Object(a.useState)(null),L=Object(d.a)($,2),F=L[0],M=L[1],W=Object(a.useMemo)((function(){return i.filter((function(e){var t=e.status;return!F||t===F}))}),[F,i]),z=b().logOut,q=g.useMutation(H,e),Y=Object(d.a)(q,1)[0],V=function(e){return g.useMutation(Q,e)}(),X=Object(d.a)(V,1)[0],Z=function(e){return g.useMutation(U,e)}(),ee=Object(d.a)(Z,1)[0],te=function(e){return g.useMutation(G,e)}(),ne=Object(d.a)(te,1)[0],ae=function(e){return g.useMutation(B,e)}(),re=Object(d.a)(ae,1)[0],ie=function(e){return g.useMutation(J,e)}(),ce=Object(d.a)(ie,1)[0],oe=function(e){return g.useQuery(R,e)}({onCompleted:function(e){if(null===e||void 0===e?void 0:e.kDramas){var t=e.kDramas;c(t);var n=t.find((function(e){return e.status===we.WATCHING}))||t.find((function(e){return e.status===we.PLANNED}));p(n)}}}).loading,ue=function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(S.a)(i),e.prev=1,e.next=4,Y({variables:{kDrama:t}});case 4:r=e.sent,o=null===(a=r.data)||void 0===a?void 0:a.kDrama,c([].concat(Object(S.a)(n),[o])),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(1),c(n),new Error("Couldn't add new KDrama");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(S.a)(i),e.prev=1,e.next=4,X({variables:{id:null===m||void 0===m?void 0:m._id,kDrama:t}});case 4:r=e.sent,o=null===(a=r.data)||void 0===a?void 0:a.kDrama,p(o),c(it(o,n)),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(1),c(n),new Error("Couldn't update KDrama");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(s.a)(l.a.mark((function e(){var t,n,a,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(S.a)(i),n=t.length%4===1?N-1:N,e.prev=2,e.next=5,ee({variables:{id:null===m||void 0===m?void 0:m._id}});case 5:r=e.sent,o=null===(a=r.data)||void 0===a?void 0:a.kDrama,c(Object(S.a)(t.filter((function(e){return e._id!==o._id})))),p(t.find((function(e){return e.status===we.WATCHING}))||t.find((function(e){return e.status===we.PLANNED}))),P(n),e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(2),c(t),new Error("Couldn't delete KDrama");case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),de=Object(a.useCallback)(function(){var e=Object(s.a)(l.a.mark((function e(t,n){var a,r,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(S.a)(i),e.prev=1,p(Object(E.a)(Object(E.a)({},m),{},{currentEpisode:n})),e.next=5,re({variables:{id:t,counter:n}});case 5:o=e.sent,u=null===(r=o.data)||void 0===r?void 0:r.kDrama,a[a.findIndex((function(e){return e._id===u._id}))]=u,p(u),c(a),e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(1),c(a),new Error("Couldn't increase episodes");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}(),[i,m,re,p]),me=Object(a.useCallback)(function(){var e=Object(s.a)(l.a.mark((function e(t,n){var a,r,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(S.a)(i),e.prev=1,p(Object(E.a)(Object(E.a)({},m),{},{status:n})),e.next=5,ne({variables:{id:t,status:n}});case 5:o=e.sent,u=null===(r=o.data)||void 0===r?void 0:r.kDrama,a[a.findIndex((function(e){return e._id===u._id}))]=u,p(u),c(a),e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(1),c(a),new Error("Couldn't set status");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}(),[i,m,ne,p]),pe=Object(a.useCallback)(function(){var e=Object(s.a)(l.a.mark((function e(t,n){var a,r,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(S.a)(i),e.prev=1,e.next=4,ce({variables:{id:t,rating:n}});case 4:o=e.sent,u=null===(r=o.data)||void 0===r?void 0:r.kDrama,a[a.findIndex((function(e){return e._id===u._id}))]=u,c(a),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(1),c(a),new Error("Couldn't set status");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),[i,ce]),fe=Object(a.useCallback)((function(){return oe?r.a.createElement(K.a,{size:200}):m?r.a.createElement(Le,{kDrama:m,setStatus:me,setEpisodes:de,setRating:pe}):r.a.createElement(w.a,{variant:"h2"},"No KDrama in Queue")}),[oe,m,me,de,pe]);return r.a.createElement(ct,{container:!0,direction:"column",alignItems:"center",justify:"space-evenly"},fe(),r.a.createElement(Ce,{setDisplayedKDrama:p,list:W,currentPage:N,setCurrentPage:P,isLoading:oe}),r.a.createElement(Ue,{setFilter:M,openAddForm:function(){return h(!0)},openEditForm:function(){y(!0),h(!0)},openRanking:function(){return I(!0)},resetPage:function(){return P(0)},logOut:z}),r.a.createElement(Ze,{addKDrama:ue,updateKDrama:le,closeModal:function(){h(!1),y(!1)},isOpen:O,editMode:x,editedKDrama:x?m:void 0,deleteKDrama:se}),r.a.createElement(rt,{handleClose:function(){return I(!1)},isOpen:_,kDramas:i}))},ut=n(154),lt=n(241),st=Object(ut.a)({palette:{neutral:{main:We.a[700]},primary:{main:Pe.a[700]},secondary:{main:lt.a[700]}}}),dt=function(e){return r.a.createElement(o.a,{theme:st},r.a.createElement(v,null,r.a.createElement(mt,null)))};function mt(){var e=b();return e?e.user?r.a.createElement(O,null,r.a.createElement(ot,null)):r.a.createElement(C,null):r.a.createElement("div",null,"Loading")}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(dt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[170,1,2]]]);
//# sourceMappingURL=main.0c34b959.chunk.js.map